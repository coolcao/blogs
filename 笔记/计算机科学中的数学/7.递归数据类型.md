# 递归数据类型

## 递归定义和结构归纳法
递归数据类型的定义包括两部分：
1. **基本情形**指属于该数据类型的某个已知数学元素
2. **构造情形**指明如何从已知基本元素或已构建的元素，构造新的元素

字符串就是一个常见的递归数据类型。给定字符集合A，字符串的定义如下：

另非空集合A为字母表，其元素为字符（字母，符号，或数字）基于字母表A的递归数据类型![](https://img001-10042971.cos.ap-shanghai.myqcloud.com/blog/mcs/Xnip2020-02-15_20-18-23.png)定义如下：
- 基本情形：空字符串 λ属于![](https://img001-10042971.cos.ap-shanghai.myqcloud.com/blog/mcs/Xnip2020-02-15_20-18-23.png)
- 构造情形：如果a∈A,且s∈![](https://img001-10042971.cos.ap-shanghai.myqcloud.com/blog/mcs/Xnip2020-02-15_20-18-23.png)，那么<a,s>∈![](https://img001-10042971.cos.ap-shanghai.myqcloud.com/blog/mcs/Xnip2020-02-15_20-18-23.png)

例如，我们可以把长度为4的二进制字符串1011看成四元组<1,0,1,1>.这个表达式应当是嵌套的元素对，即：<1,<0,<1,<1,λ>>>>


递归的定义字符串长度|s|:
- 基本情形：|λ|::=0
- 构造情形：|<a,s>|::=1+|s|

如果要定义一个递归数据类型上的方法f，我们要先定义相应数据类型基本情形的f的值，然后指明在构造情形下，我们如何基于已知的f的值定义新的f的值。

字符串s和t的拼接字符串s·t即在s后面接上t。

字符串s,t∈![](https://img001-10042971.cos.ap-shanghai.myqcloud.com/blog/mcs/Xnip2020-02-15_20-18-23.png)的拼接字符串s·t的递归定义如下：
- 基本情形：λ·t::=t
- 构造情形：〈a,s〉·t::=〈a,s·t〉

### 结构归纳法
结构归纳法是对递归定义的数据类型的性质进行证明的方法。和递归定义相同，结构归纳法证明也包含两部分：
- 证明基本情形对应的元素有某种性质
- 证明当构造情形用该性质的元素生成新的元素时，新的元素也具有该性质


例如，在拼接字符串的例子中，我们对拼接的定义可知空字符串是“左恒等”，即 λ·s::=s。
我们要想证明空字符串其实也是“右恒等”的，即s·λ::=s。虽然右恒等这一性质从定义上无法推出，但是可以用结构归纳法来证明。

证明：对任意s∈![](https://img001-10042971.cos.ap-shanghai.myqcloud.com/blog/mcs/Xnip2020-02-15_20-18-23.png)，s·λ::=s。

- 采用结构归纳法证明
- 另P(s)::=[s·λ::=s]
- 基本情形：(s=λ)
  - s·λ=λ·λ
  -    =λ
  -    =s
- 构造情形：(s=a·t)
  - s·λ=(a·t)·λ
  -    =a·(t·λ)
  -    =a·t
  -    =s
- 因此P(s)为真，完成对构造情形的证明。

构造归纳法的原则：
设P为基于递归数据类型R的某一谓词。如果
- 对于任意基本情形元素b∈R, P(b)为真，且
- 对任意两个参数的构造情形c，任意r,s∈R，[P(r) AND P(s) IMPLIES P(c(r;s))] ，且不管参数个数有多少，其他构造情形也有类似性质，故 对任意r∈R，P(r)为真。

## 匹配带括号的字符串
设![](https://img001-10042971.cos.ap-shanghai.myqcloud.com/blog/mcs/Xnip2020-02-21_11-24-15.png)为所有由中括号构成的字符串集合，下面这两个字符串便属于集合![](https://img001-10042971.cos.ap-shanghai.myqcloud.com/blog/mcs/Xnip2020-02-21_11-24-15.png)：

![](https://img001-10042971.cos.ap-shanghai.myqcloud.com/blog/mcs/Xnip2020-02-21_11-26-00.png)

对于字符串![](https://img001-10042971.cos.ap-shanghai.myqcloud.com/blog/mcs/Xnip2020-02-21_11-26-54.png)，若其左右括号相互匹配，则称之为匹配字符串。上面这个例子中，左边字符串是不匹配的，右边字符串是匹配的。
