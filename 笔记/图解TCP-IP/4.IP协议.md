---
title: 4.IP协议.md
date: 2021-08-03 09:43:24
tags: []
categories:
- 技术博客
- 原创
---

IP(IPv4, IPv6)相当于OSI参考模型中的第3层-网络层。
网络层的主要作用是”实现终端节点的通信“。

## IP基础知识
IP大致分为三大作用模块：`IP寻址`，`路由`以及`IP分包与组包`。

### IP地址属于网络层地址
IP地址用于在“连接到网络中的所有主机中识别出进行通信的目标地址”。因此在TCP/IP通信中，所有主机或路由器必须设置自己的IP地址。

> 在网桥或交换集线器等物理层或数据链路层数据包转发设备中不需要设置IP地址。因为这些设备只负责将IP包转化为0，1比特流转发或对数据链路帧的数据进行转发，而不需要应对IP协议。

### 路由控制
路由控制是指将分组数据发送到最终目标地址的功能。

- 发送数据至最终目标地址
    Hop中文译名为“跳”。它是指网络中的一个区间。IP包正是在网络中一个跳间被转发。因此IP路由也叫多跳路由，在每一个区间内决定着包在下一跳被转发的路径。
    ![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1628996404_20210804153331909_1851851804.png)
    多跳路由是指路由器或主机在转发IP数据包时只指定下一个路由器或主机，而不是将到最终目标地址为止的所有全部指定出来。因为每一个区间在转发IP数据包时会分别指定下一跳的操作，直至包达到最终的目标地址。
- 路由控制表
    为了将数据包发送给目标主机，所有的主机都维护着一张路由控制表。该表记录着IP数据在下一步应该发送给哪个路由器。IP包将根据这个路由表在各个数据链路上传输。

### IP属于面向无连接型
IP面向无连接。即在发包之前，不需要与对端目标地址建立连接。
为什么IP要采用面向无连接呢？主要有两点：一是为了简化，二是为了提速。
面向连接比起面向无连接处理相对复杂，甚至管理每个连接本身就是一个相当繁琐的事情。此外，每次通信之前都要建立连接，又会降低处理速度。需要有连接时，可以委托上一层提供次服务。因此IP为了简化实现与高速化，采用面向无连接的方式。

> 为了提高可靠性，上一层的TCP采用面向有连接型。

## IP地址的基础知识
IP地址（IPv4）由32位正整数来表示。

IP地址由网络标识和主机标识两部分构成。网络标识必须保证相互连接的每个段的地址不相重复。而相同段内相连的主机必须有相同的网络地址。IP地址的主机标识则不允许在同一网段重复出现。

通过设置网络标识和主机标识，在相互连接的整个网络中，保证每台主机的IP不会相互重叠。即IP地址具有唯一性。

IP地址分类：A，B，C，D 类

![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1628996405_20210804160644646_592773857.png)

### 广播地址
广播地址用于在同一个链路中相互连接的主机之间发送数据的IP地址。广播分为`本地广播`和`直接广播`两种。
本网络内的广播叫本地广播，在不同网络之间的广播叫直接广播。


### IP多播
多播用于将包发送给特定组内的所有主机，同时发送提高效率。

多播采用D类地址。因此如果从首位开始到第4位是`1110`就可以认为是多播地址。而剩下的28位可以成为多播的组编号。

### 子网掩码
