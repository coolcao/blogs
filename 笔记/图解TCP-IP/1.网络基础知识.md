---
title: 1.网络基础知识.md
date: 2021-08-02 09:23:58
tags: []
categories:
- 技术博客
- 原创
---

## 计算机网络出现的背景
计算机网络根据其规模可以分为 **WAN（广域网）** **LAN（局域网）** 。

TCP/IP是通信协议的统称。

## 协议
“计算机网络体系结构”将这些网络协议进行了系统的归纳，TCP/IP就是IP, TCP, HTTP等协议的集合。

协议就是计算机与计算机之间通过网络实现通信时事先达成的一种“约定”。这种“约定”使那些由不同厂商的设备，不同的CPU以及不同的操作系统的计算机之间，只要能遵循相同的协议即可实现通信。

### 分组交换协议
分组交换协议是将大数据分割为一个个叫做 **包（Packet）** 的较小单位进行传输的方法。

![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875017_20210802093606749_1377289953.png)

一个较大的数据被分为多个分组时，为了标明是原始数据的哪一部分，就有必要将分组的序号写入包中。接收端根据这个序号，再将每个分组按照顺序装配成原始数据。

通信协议中，通常会规定报文首部应该写入哪些信息，应该如何处理这些信息。相互通信的计算机根据协议构造报文首部，读取首部内容等。发送方和接收方必须对报文的首部和内容保持一致才能正常通信。


## 协议分层与OSI参考模型
OSI参考模型将通信协议中必要的功能分为7层，通过这些分层使得那些复杂的网络协议更加简单化。

分层的优点是，能够细化每一层的功能，更易于实现每一层的协议，并界定每一层的具体责任和义务。
缺点是，过分模块化，使处理变得更加沉重以及每个模块都不得不实现有些相似的处理逻辑。


![OSI参考模型](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875017_20210802094719782_386009058.png)

### OSI参考模型中各个分层的作用
|     |  分层名称  |                              功能                              |                  每层功能概览                   |
| --- | -------- | ------------------------------------------------------------- | --------------------------------------------- |
| 7   | 应用层    | 针对特定应用的协议                                               | ![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875018_20210802095036475_106140219.png) |
| 6    | 表示层    | 设备固有格式和网络标准数据格式的转换                                 | ![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875018_20210802095137141_1487233723.png) |
| 5   | 会话层    | 通信管理，负责建立和断开通信连接（数据流动的逻辑通路），管理传输层以下的分层 | ![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875019_20210802095257440_1375015028.png) |
| 4   | 传输层    | 管理两个节点之间的数据传输。负责可靠传输                              | ![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875019_20210802095352815_806050229.png)  |
| 3   | 网络层    | 地址管理和路由选择                                               | ![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875019_20210802095434496_959353527.png)  |
| 2   | 数据链路层 | 互联设备之间传送和识别数据帧                                       | ![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875020_20210802095536621_547506613.png)  |
| 1   | 物理层    | 以0，1代表电压的高低，灯光的闪灭。界定连接器和网线的规格                 | ![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875020_20210802095649229_2123700943.png) |


- 应用层：
    为应用程序提供服务并规定应用程序中通信相关的细节。包括文件传输，电子邮件，远程登录等协议
- 表示层：
    将应用处理的信息转换为适合网络传输的格式，或将来自下一层的数据转换为上一层可以处理的格式。它主要负责格式转换。
    具体来说就是将设备固有的格式，转换为网络标准传输格式。
- 会话层：
    负责建立和断开通信连接。以及数据的分隔等数据传输相关的管理。
- 传输层：
    起可靠传输的作用。只在通信双方节点上进行处理，而无需在路由器上处理。
- 网络层：
    将数据传输到目标地址。目标地址可以是多个网络通过路由器连接而成的某一个地址。这一层主要负责寻址和路由选择。
- 数据链路层：
    负责物理层面上互联的，节点之间的通信传输。将0，1序列划分为有意义的数据帧传送给对端（数据帧的生成与接收）
- 物理层：
    负责0，1比特流与电压的高低，光的闪灭之间的互换


## 传输方式的分类
### 面向有连接和面向无连接
- 面向有连接
    面向有连接型中，在发送数据之前，需要在收发主机之间连接一条通信线路。
- 面向无连接
    面向无连接型则不需要建立和断开连接。发送端可于任何时候自由的发送数据。反之，接收端也永远不知道自己会在何时从哪里接收数据。因此在面向无连接的情况下，接收端时常需要确认是否收到了数据。

### 电路交换与分组交换
网络通信方式大致分为两类：电路交换和分组交换。

在电路交换中，交换机主要负责数据的中转处理。计算机首先被连接到交换机上，而交换机与交换机之间则由众多通信线路再继续连接。因此计算机之间发送数据时需要通过交换机与目标主机建立通信电路。我们将连接电路称为建立连接。建立好连接后，用户就可以一直使用这条电路，直到该连接被断开为止。一台计算机在收发信息时会独占整条电路，其他计算机只能等待这台计算机处理完成后才有机会使用这条电路收发信息。如果并发用户数超过交换机之间的通信路数，就意味着通信无法实现。

解决的办法是，让连接到通信电路的计算机将所要发送的数据分成多个数据包，按照一定的顺序排列之后分别发送。这就是分组交换。

在分组交换中，由分组交换机（路由器）连接通信线路，分组交换的大致处理过程是：发送端计算机将数据分组发送给路由器，路由器接收到这些数据后，缓存到自己的缓冲区，然后再转发给目标计算机。分组交换也有另外一个名称： 积蓄交换。


路由器接收到数据后，会按照顺序缓存到相应的队列中，再以先进先出的顺序将他们逐一发送出去。


### 根据接收端数量分类
- 单播
    ![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875020_20210802104838204_1863535861.png)
- 广播
    ![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875021_20210802104855848_1545707979.png)
- 多播
    ![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875021_20210802104912985_604325294.png)
- 任播
    ![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875022_20210802104933384_1445049595.png)

## 地址

1. 地址的唯一性
2. 地址的层次性


## 网络的构成要素

### 网卡
### 中继器

- 中继器是对减弱的信号进行放大和发送的设备。
- 中继器通过物理层的连接延长网络
- 即使在链路层出现某些错误，中继器仍然转发数据
- 中继器无法改变传输速度

中继器在OSI模型的第一层--物理层面上延长网络的设备。由电缆传过来的电信号或光信号经由中继器的波形调整和放大再传给另一个电缆。
![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875022_20210802105258451_1055979242.png)

### 网桥/2层交换机
![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875023_20210802105453065_1038261486.png)

网桥是在OSI模型的第2层，数据链路层上连接两个网络的设备。他能够识别数据链路层中的数据帧，并将这些数据帧临时存储于内存，再重新生成信号作为一个全新的帧转发给相连的另一个网段。

![自学式网桥](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875023_20210802105723363_1756163327.png)


以太网中经常使用的交换集线器（Hub），现在基本也属于网桥的一种。交换集线器中连接电缆的每个端口，都能提供类似网桥的功能。

![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875024_20210802105911339_821792521.png)

### 路由器/3层交换机
![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875024_20210802105936294_1399566590.png)

路由器在OSI模型的第三层。网络层面上连接两个网络，并对分组报文进行转发的设备。网桥是根据物理地址（MAC地址）进行处理。而路由器则根据IP地址进行处理。

路由器还有分担网络负荷的作用，甚至有些路由器具备一定的网络安全功能。

### 4~7层交换机
`4~7层交换机`负责处理OSI模型中从传输层到应用层的数据。如果用TCP/IP分层模型来表述，`4~7层交换机`就是以TCP等协议的传输层及其上面的应用层为基础，分析收发数据，并对其进行特定的处理。

负载均衡，带宽控制，广域网加速器，特殊应用访问加速以及防火墙都属于4~7层交换机的应用场景。

### 网关
![](https://img-vnote-1251075307.cos.ap-beijing.myqcloud.com/1627875024_20210802110936924_1127292539.png)

- 网关负责协议的转换与数据的转发
- 在同一类型的协议之间转发数据叫做应用网关

